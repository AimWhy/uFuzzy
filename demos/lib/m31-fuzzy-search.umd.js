!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).fuzzySearch={})}(this,function(t){var e=/*#__PURE__*/function(){function t(){}return t.ToInt32Array=function(t){for(var e=new Int32Array(t.length),n=0,r=t.length;n<r;n++)e[n]=t[n];return e},t}(),n=/*#__PURE__*/function(){function t(){}return t.getHashCode=function(t){for(var e=5381,n=e,r=0,i=t.length;r<i&&"\0"!=t[r]&&(e=(e<<5)+e^t.charCodeAt(r),r!==i-1&&"\0"!==t[r+1]);r+=2)n=(n<<5)+n^t.charCodeAt(r+1);return e+1566083941*n|0},t}(),r=/*#__PURE__*/function(){function t(){}return t.isSurrogate=function(t){var e=t.charCodeAt(0);return e>=55296&&e<=57343},t.isAlphanumeric=function(t){var e=t.charCodeAt(0);return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122},t.isLowerAlpha=function(t){var e=t.charCodeAt(0);return e>=97&&e<=122},t}(),i=function(t,e,n){this.matches=void 0,this.query=void 0,this.meta=void 0,this.matches=t,this.query=e,this.meta=n};function a(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function o(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c=/*#__PURE__*/function(){function t(t){this.entries=void 0,this.entries=void 0!==t?t:new Map}var e=t.prototype;return e.add=function(t,e){if(this.entries.has(t))throw new Error("A meta entry with key "+t+" is already present.");this.entries.set(t,e)},e.get=function(t){return this.entries.get(t)},o(t,[{key:"allEntries",get:function(){return this.entries}}]),t}(),d=function(t,e,n){void 0===e&&(e=10),void 0===n&&(n=.3),this.string=void 0,this.topN=void 0,this.minQuality=void 0,this.string=t,this.topN=Math.max(0,e),this.minQuality=Math.max(0,Math.min(1,n))},m=function(t,e){this.removedEntities=void 0,this.meta=void 0,this.removedEntities=t,this.meta=e},f=/*#__PURE__*/function(){function t(){}return t.mergeResults=function(t,e){var n=t.query,r=this.mergeMatches(t.matches,e.matches,n.topN),a=this.mergeMeta(t.meta,e.meta);return new i(r,n,a)},t.mergeMatches=function(t,e,n){if(0===e.length)return t;if(0===t.length)return e;var r=[].concat(t,e);return r.sort(function(t,e){return t.quality>e.quality?-1:t.quality<e.quality?1:0}),r.length<=n?r:r.slice(0,n)},t.mergeMeta=function(t,e){for(var n,r=new Map,i=u(t.allEntries);!(n=i()).done;){var a=n.value;r.set(a[0],a[1])}for(var s,o=u(e.allEntries);!(s=o()).done;){var h=s.value,d=h[0],m=h[1],f=r.get(d);void 0!==f?"number"!=typeof f||"number"!=typeof m?(r.delete(d),r.set(d+"_0",f),r.set(d+"_1",m)):r.set(d,f+m):r.set(d,m)}return new c(r)},t}(),l=/*#__PURE__*/function(){function t(t,e,n){this.maxQueryLength=void 0,this.mainSearcher=void 0,this.secondarySearcher=void 0,this.maxQueryLength=t,this.mainSearcher=e,this.secondarySearcher=n}var e=t.prototype;return e.indexEntities=function(t,e,n){return this.secondarySearcher.indexEntities([],e,n),this.mainSearcher.indexEntities(t,e,n)},e.getMatches=function(t){return t.string?(t.string.length>this.maxQueryLength&&(t=new d(t.string.substring(0,this.maxQueryLength),t.topN,t.minQuality)),f.mergeResults(this.mainSearcher.getMatches(t),this.secondarySearcher.getMatches(t))):new i([],t,new c)},e.tryGetTerms=function(t){var e=this.mainSearcher.tryGetTerms(t);return null!==e?e:this.secondarySearcher.tryGetTerms(t)},e.getTerms=function(){return this.mainSearcher.getTerms().concat(this.secondarySearcher.getTerms())},e.tryGetEntity=function(t){var e,n;return null!=(e=null!=(n=this.mainSearcher.tryGetEntity(t))?n:this.secondarySearcher.tryGetEntity(t))?e:null},e.getEntities=function(){return this.mainSearcher.getEntities().concat(this.secondarySearcher.getEntities())},e.removeEntities=function(t){for(var e=[],n=0,r=t.length;n<r;n++)(this.mainSearcher.removeEntity(t[n])||this.secondarySearcher.removeEntity(t[n]))&&e.push(t[n]);var i=new c;return new m(e,i)},e.upsertEntities=function(t,e,n){for(var r=[],i=[],a=0,s=t.length;a<s;a++){var o=t[a],h=e(o);this.tryUpdate(o,h,n)||(r.push(h),i.push(o))}return this.removeEntities(r),t.length>0?this.reindexSecondarySearcher(i,e,n):new c},e.reindexSecondarySearcher=function(t,e,n){var r=this.secondarySearcher.getEntities().concat(t);return this.secondarySearcher.indexEntities(r,e,n)},e.tryUpdate=function(t,e,n){return this.tryUpdateSearcher(t,e,n,this.mainSearcher)||this.tryUpdateSearcher(t,e,n,this.secondarySearcher)},e.tryUpdateSearcher=function(t,e,n,r){var i=r.tryGetTerms(e);if(null===i)return!1;if(this.termsAreEqual(i,n(t))){if(!r.replaceEntity(e,t,e))throw new Error("Entity with id "+e+" was not present.");return!0}return!1},e.termsAreEqual=function(t,e){return t===e||null!=t&&null!=e&&t.length===e.length&&t.every(function(t,n){return t===e[n]})},e.save=function(t){this.mainSearcher.save(t),this.secondarySearcher.save(t)},e.load=function(t){this.mainSearcher.load(t),this.secondarySearcher.load(t)},t}(),g=/*#__PURE__*/function(){function t(t){this.dynamicSearcher=void 0,this.dynamicSearcher=t}var e=t.prototype;return e.removeEntities=function(t){var e=performance.now(),n=this.dynamicSearcher.removeEntities(t),r=Math.round(performance.now()-e);return n.meta.add("removalDuration",r),n},e.upsertEntities=function(t,e,n){var r=performance.now(),i=this.dynamicSearcher.upsertEntities(t,e,n),a=Math.round(performance.now()-r);return i.add("upsertDuration",a),i},e.indexEntities=function(t,e,n){var r=performance.now(),i=this.dynamicSearcher.indexEntities(t,e,n),a=Math.round(performance.now()-r);return i.add("indexingDuration",a),i},e.getMatches=function(t){var e=performance.now(),n=this.dynamicSearcher.getMatches(t),r=Math.round(performance.now()-e);return n.meta.add("queryDuration",r),n},e.tryGetEntity=function(t){return this.dynamicSearcher.tryGetEntity(t)},e.getEntities=function(){return this.dynamicSearcher.getEntities()},e.tryGetTerms=function(t){return this.dynamicSearcher.tryGetTerms(t)},e.getTerms=function(){return this.dynamicSearcher.getTerms()},e.save=function(t){this.dynamicSearcher.save(t)},e.load=function(t){this.dynamicSearcher.load(t)},t}(),v=function(t,e,n){this.entity=void 0,this.quality=void 0,this.matchedString=void 0,this.entity=t,this.quality=e,this.matchedString=n},p=/*#__PURE__*/function(){function t(t){this.stringSearcher=void 0,this.entities=void 0,this.idToIndex=void 0,this.terms=void 0,this.termIndexToEntityIndex=void 0,this.entityIndexToFirstTermIndex=void 0,this.stringSearcher=t,this.entities=[],this.idToIndex=new Map,this.terms=[],this.termIndexToEntityIndex=new Int32Array(0),this.entityIndexToFirstTermIndex=new Int32Array(0)}var n=t.prototype;return n.indexEntities=function(t,n,r){var i=this;this.entities=[].concat(t),this.idToIndex=new Map,this.terms=[];for(var a=[],s=[],o=function(e){var o;i.idToIndex.set(n(t[e]),e);var h=r(t[e]);s.push(i.terms.length),(o=i.terms).push.apply(o,h),a.push.apply(a,h.map(function(){return e}))},h=0,u=t.length;h<u;h++)o(h);this.termIndexToEntityIndex=e.ToInt32Array(a),this.entityIndexToFirstTermIndex=e.ToInt32Array(s);var c=this.stringSearcher.index(this.terms);return c.add("numberOfEntities",this.entities.length),c.add("numberOfTerms",this.terms.length),c},n.getMatches=function(t){var e=new d(t.string,Infinity,t.minQuality),n=this.stringSearcher.getMatches(e),r=this.getMatchesFromResult(n,t.topN);return new i(r,t,n.meta)},n.getMatchesFromResult=function(t,e){if(0===e)return[];for(var n=new Set,r=[],i=0,a=t.matches.length;i<a;i++){var s=t.matches[i],o=this.termIndexToEntityIndex[s.index];if(!n.has(o)&&null!==this.entities[o]&&(n.add(o),r.push(new v(this.entities[o],s.quality,this.terms[s.index])),r.length===e))break}return r},n.tryGetEntity=function(t){var e=this.idToIndex.get(t);return void 0===e?null:this.entities[e]},n.getEntities=function(){return this.entities.filter(function(t){return null!==t})},n.tryGetTerms=function(t){var e=this.idToIndex.get(t);return void 0===e?null:this.terms.slice(this.entityIndexToFirstTermIndex[e],e===this.entities.length-1?this.terms.length:this.entityIndexToFirstTermIndex[e+1])},n.getTerms=function(){for(var t=[],e=0,n=this.termIndexToEntityIndex.length;e<n;e++)null!==this.entities[this.termIndexToEntityIndex[e]]&&t.push(this.terms[e]);return t},n.removeEntity=function(t){var e=this.idToIndex.get(t);return void 0!==e&&(this.entities[e]=null,this.idToIndex.delete(t),!0)},n.replaceEntity=function(t,e,n){var r=this.idToIndex.get(t);return void 0!==r&&(this.entities[r]=e,this.idToIndex.delete(t),this.idToIndex.set(n,r),!0)},n.save=function(t){t.add(this.entities),t.add(this.idToIndex),t.add(this.terms),t.add(this.termIndexToEntityIndex),t.add(this.entityIndexToFirstTermIndex),this.stringSearcher.save(t)},n.load=function(t){this.entities=t.get(),this.idToIndex=t.get(),this.terms=t.get(),this.termIndexToEntityIndex=t.get(),this.entityIndexToFirstTermIndex=t.get(),this.stringSearcher.load(t)},t}(),y=function(t,e){this.strings=void 0,this.meta=void 0,this.strings=t,this.meta=e},S=/*#__PURE__*/function(){function t(t){this.normalizationFunction=void 0,this.normalizationFunction=t}var e=t.prototype;return e.normalize=function(t){return this.normalizationFunction(t)},e.normalizeBulk=function(t){var e=this,n=t.map(function(t){return e.normalize(t)});return new y(n,new c)},t}(),w=/*#__PURE__*/function(){function t(t){this.normalizers=void 0,this.normalizers=t}var e=t.prototype;return e.normalize=function(t){for(var e=0,n=this.normalizers.length;e<n;e++)t=this.normalizers[e].normalize(t);return t},e.normalizeBulk=function(t){for(var e=new c,n=0,r=this.normalizers.length;n<r;n++){var i=this.normalizers[n].normalizeBulk(t);t=i.strings;for(var a,s=u(i.meta.allEntries);!(a=s()).done;){var o=a.value;e.add(o[0],o[1])}}return new y(t,e)},t}(),x=/*#__PURE__*/function(){function t(t){this.paddingLeft=void 0,this.paddingRight=void 0,this.paddingMiddle=void 0,this.paddingCharacters=void 0,this.treatCharacterAsSpace=void 0,this.allowCharacter=void 0,this.numberOfSurrogateCharacters=0,this.paddingLeft=t.paddingLeft,this.paddingRight=t.paddingRight,this.paddingMiddle=t.paddingMiddle,this.paddingCharacters=new Set([t.paddingLeft.split(""),t.paddingRight.split(""),t.paddingMiddle.split("")].flat()),this.treatCharacterAsSpace=t.treatCharacterAsSpace,this.allowCharacter=t.allowCharacter}var e=t.prototype;return e.normalize=function(t){var e=new Array(t.length+2),n=0;e[n++]=this.paddingLeft;for(var r=!0,i=!1,a=!1,s=0,o=t.length;s<o;s++){var h=this.getNormalizedCharacter(t[s]);""!==h&&(" "===h?i=!0:(i&&!r&&(e[n++]=this.paddingMiddle),e[n++]=h,a=!0,r=!1,i=!1))}return e[n++]=this.paddingRight,a?e.join(""):""},e.getNormalizedCharacter=function(t){return" "===t||this.treatCharacterAsSpace(t)?" ":this.isSurrogate(t)||this.paddingCharacters.has(t)||!this.allowCharacter(t)?"":t.toLowerCase()},e.isSurrogate=function(t){return!!r.isSurrogate(t)&&(this.numberOfSurrogateCharacters++,!0)},e.normalizeBulk=function(t){var e=this;this.numberOfSurrogateCharacters=0;var n=t.map(function(t){return e.normalize(t)}),r=new c;return r.add("numberOfSurrogateCharacters",this.numberOfSurrogateCharacters),new y(n,r)},t}(),I=/*#__PURE__*/function(){function t(){}var e=t.prototype;return e.normalize=function(t){return t||""},e.normalizeBulk=function(t){var e=this,n=t.map(function(t){return e.normalize(t)});return new y(n,new c)},t}(),T=/*#__PURE__*/function(){function t(t,e){this.normalizeVariationsAndInput=void 0,this.replacements=void 0,this.normalizeVariationsAndInput=e,this.replacements=[];for(var n,r=u(t);!(n=r()).done;){for(var i,a=n.value,s=new Map,o=u(a);!(i=o()).done;)for(var h,c=i.value,d=c[0],m=u(c[1]);!(h=m()).done;){var f=e(h.value);s.set(f,d)}this.replacements.push(s)}}var e=t.prototype;return e.normalize=function(t){t=this.normalizeVariationsAndInput(t);for(var e=new Array(t.length),n=0,r=0,i=t.length;r<i;r++)for(var a,s=u(this.replacements);!(a=s()).done;){var o=a.value.get(t[r]);if(void 0!==o){e[n++]=o;break}e[n++]=t[r]}return e.join("")},e.normalizeBulk=function(t){var e=this,n=t.map(function(t){return e.normalize(t)});return new y(n,new c)},t}(),C=/*#__PURE__*/function(){function t(){}return t.create=function(t){var e=new I,n=new T(t.replacements,function(t){return t.toLowerCase().normalize("NFKC")}),r=new S(function(t){return t.normalize("NFKD")}),i=new x(t);return new w([e,n,r,i])},t}(),M=function(t,e){this.index=void 0,this.quality=void 0,this.index=t,this.quality=e,this.index=t,this.quality=e},N=function(t,e,n){this.matches=void 0,this.query=void 0,this.meta=void 0,this.matches=t,this.query=e,this.meta=n},b=/*#__PURE__*/function(){function t(t){this.stringSearcher=void 0,this.distinctMapping=void 0,this.sortMapping=void 0,this.stringSearcher=t,this.distinctMapping=new Int32Array(0),this.sortMapping=new Int32Array(0)}var n=t.prototype;return n.index=function(t){var n=t.map(function(t,e){return{term:t,index:e}});n.sort(function(t,e){return t.term<e.term?-1:t.term>e.term?1:0}),this.sortMapping=new Int32Array(n.length);for(var r=0,i=n.length;r<i;r++)this.sortMapping[r]=n[r].index;for(var a=[],s=[],o=0,h=null,u=0,c=n.length;u<c;u++){var d=n[u].term;d!=h&&(a[o]=d,s[o]=u,o++),h=d}s[o++]=n.length,this.distinctMapping=e.ToInt32Array(s);var m=this.stringSearcher.index(a);return m.add("numberOfDistinctTerms",a.length),m},n.getMatches=function(t){var e=this,n=this.stringSearcher.getMatches(t),r=new Array(n.matches.length),i=0;return n.matches.forEach(function(t){for(var n=e.distinctMapping[t.index+1],a=e.distinctMapping[t.index];a<n;a++)r[i++]=new M(e.sortMapping[a],t.quality)}),new N(r,t,n.meta)},n.save=function(t){t.add(this.distinctMapping),t.add(this.sortMapping),this.stringSearcher.save(t)},n.load=function(t){this.distinctMapping=t.get(),this.sortMapping=t.get(),this.stringSearcher.load(t)},t}(),z=/*#__PURE__*/function(){function t(){this.ids=void 0,this.frequencies=void 0,this.ids=[],this.frequencies=[]}var n=t.prototype;return n.addId=function(t,e){this.ids.push(t),this.frequencies.push(e)},n.seal=function(){this.ids=e.ToInt32Array(this.ids),this.frequencies=e.ToInt32Array(this.frequencies)},n.save=function(t){t.add(this.ids),t.add(this.frequencies)},n.load=function(t){this.ids=t.get(),this.frequencies=t.get()},o(t,[{key:"length",get:function(){return this.ids.length}}]),t}(),E=/*#__PURE__*/function(){function t(){this.ngramToTermIds=void 0,this.ngramToTermIds=new Map}var e=t.prototype;return e.add=function(t,e,n){var r=this.ngramToTermIds.get(t);r||(r=new z,this.ngramToTermIds.set(t,r)),r.addId(e,n)},e.seal=function(){for(var t,e=u(this.ngramToTermIds.values());!(t=e()).done;)t.value.seal()},e.getIds=function(t){return this.ngramToTermIds.get(t)},e.save=function(t){t.add(this.ngramToTermIds.size);for(var e,n=u(this.ngramToTermIds);!(e=n()).done;){var r=e.value,i=r[1];t.add(r[0]),i.save(t)}},e.load=function(t){for(var e=t.get(),n=0;n<e;n++){var r=t.get(),i=new z;i.load(t),this.ngramToTermIds.set(r,i)}},o(t,[{key:"size",get:function(){return this.ngramToTermIds.size}}]),t}(),A=/*#__PURE__*/function(){function t(){}return t.ComputeJaccardCoefficient=function(t,e,n){return n/(t+e-n)},t.ComputeOverlapMaxCoefficient=function(t,e,n){return n/Math.max(t,e)},t}(),q=/*#__PURE__*/function(){function t(t){this.ngramComputer=void 0,this.invertedIndex=void 0,this.numberOfNgrams=void 0,this.commonNgramCounts=void 0,this.ngramComputer=t,this.invertedIndex=new E,this.numberOfNgrams=new Int32Array(0),this.commonNgramCounts=new Int32Array(0)}var e=t.prototype;return e.index=function(t){this.invertedIndex=new E,this.commonNgramCounts=new Int32Array(t.length),this.numberOfNgrams=new Int32Array(t.length);for(var e=new c,n=0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.isValidTerm(a)){var s=this.ngramComputer.computeNgrams(a);this.numberOfNgrams[r]=s.length;for(var o,h=u(this.getNgramsToFrequency(s));!(o=h()).done;){var d=o.value;this.invertedIndex.add(d[0],r,d[1])}}else this.numberOfNgrams[r]=0,n++}return this.invertedIndex.seal(),e.add("numberOfInvalidTerms",n),e},e.isValidTerm=function(t){return null!=t&&""!==t.trim()},e.getMatches=function(t){if(0===this.invertedIndex.size)return new N([],t,new c);var e=this.ngramComputer.computeNgrams(t.string),n=this.getNgramsToFrequency(e),r=e.length;this.computeCommonNgramCounts(n);var i=this.getMatchesFromCommonNgrams(r,t.minQuality);return new N(i,t,new c)},e.computeCommonNgramCounts=function(t){this.commonNgramCounts.fill(0);for(var e,n=u(t);!(e=n()).done;){var r=e.value,i=r[1],a=this.invertedIndex.getIds(r[0]);if(null!=a)for(var s=0,o=a.length;s<o;s++)this.commonNgramCounts[a.ids[s]]+=Math.min(i,a.frequencies[s])}},e.getNgramsToFrequency=function(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var i=t[n],a=e.get(i);e.set(i,void 0!==a?a+1:1)}return e},e.getMatchesFromCommonNgrams=function(t,e){for(var n=[],r=0,i=this.numberOfNgrams.length;r<i;r++){var a=A.ComputeOverlapMaxCoefficient(t,this.numberOfNgrams[r],this.commonNgramCounts[r]);a>e&&n.push(new M(r,a))}return n},e.save=function(t){this.invertedIndex.save(t),t.add(this.numberOfNgrams)},e.load=function(t){this.invertedIndex=new E,this.invertedIndex.load(t),this.numberOfNgrams=t.get(),this.commonNgramCounts=new Int32Array(this.numberOfNgrams.length)},t}(),O=/*#__PURE__*/function(){function t(t,e){this.stringSearcher=void 0,this.penaltyFactor=void 0,this.hashCodes=void 0,this.stringSearcher=t,this.penaltyFactor=1-e,this.hashCodes=new Int32Array(0)}var e=t.prototype;return e.index=function(t){this.hashCodes=new Int32Array(t.length);for(var e=0,r=t.length;e<r;e++)this.hashCodes[e]=n.getHashCode(t[e]);return this.stringSearcher.index(t)},e.getMatches=function(t){var e=this,r=n.getHashCode(t.string),i=this.stringSearcher.getMatches(t),a=i.matches.map(function(t){return e.penalizeMatch(t,r)}).filter(function(e){return e.quality>=t.minQuality});return new N(a,i.query,i.meta)},e.penalizeMatch=function(t,e){return t.quality*=this.hashCodes[t.index]===e?1:this.penaltyFactor,t},e.save=function(t){t.add(this.hashCodes),this.stringSearcher.save(t)},e.load=function(t){this.hashCodes=t.get(),this.stringSearcher.load(t)},t}(),Q=/*#__PURE__*/function(){function t(t){var e;this.ngramN=void 0,this.transformNgram=void 0,this.ngramN=t.ngramN,this.transformNgram=null!=(e=t.transformNgram)?e:function(t){return t}}var e=t.prototype;return e.computeNgrams=function(t){if(0===t.length)return[];if(t.length<=this.ngramN){var e=this.transformNgram(t);return e?[e]:[]}for(var n=[],r=0,i=this.maximumNumberOfNgrams(t);r<i;r++){var a=this.transformNgram(t.substring(r,r+this.ngramN));a&&n.push(a)}return n},e.maximumNumberOfNgrams=function(t){return Math.max(t.length-this.ngramN+1,t.length>0?1:0)},t}(),R=/*#__PURE__*/function(){function t(t,e){this.stringSearcher=void 0,this.normalizer=void 0,this.stringSearcher=t,this.normalizer=e}var e=t.prototype;return e.index=function(t){var e=performance.now(),n=this.normalizer.normalizeBulk(t),r=Math.round(performance.now()-e),i=this.stringSearcher.index(n.strings);i.add("normalizationDuration",r);for(var a,s=u(n.meta.allEntries);!(a=s()).done;){var o=a.value;i.add(o[0],o[1])}return i},e.getMatches=function(t){var e=new d(this.normalizer.normalize(t.string),t.topN,t.minQuality),n=this.stringSearcher.getMatches(e);return new N(n.matches,t,n.meta)},e.save=function(t){this.stringSearcher.save(t)},e.load=function(t){this.stringSearcher.load(t)},t}(),D=/*#__PURE__*/function(){function t(t){this.stringSearcher=void 0,this.stringSearcher=t}var e=t.prototype;return e.index=function(t){return this.stringSearcher.index(t)},e.getMatches=function(t){var e=this.stringSearcher.getMatches(t);return e.matches.sort(this.compareMatchesByQualityAndIndex),e},e.compareMatchesByQualityAndIndex=function(t,e){return t.quality>e.quality?-1:t.quality<e.quality?1:t.index<e.index?-1:t.index>e.index?1:0},e.save=function(t){this.stringSearcher.save(t)},e.load=function(t){this.stringSearcher.load(t)},t}(),F=/*#__PURE__*/function(){function t(){}return t.createSearcher=function(t){var e=new Q(t.ngramComputerConfig),n=C.create(t.normalizerConfig),r=new q(e);return r=new O(r,t.inequalityPenalty),r=new b(r),r=new D(r),r=new R(r,n),new p(r)},t}(),L=/*#__PURE__*/function(){function t(t,e){this.ngramN=void 0,this.transformNgram=void 0,this.ngramN=t,this.transformNgram=e}return t.createDefaultConfig=function(){return new t(3,function(t){return t.endsWith("$")?null:-1===t.indexOf("$")?t.split("").sort().join(""):t})},t}(),G=/*#__PURE__*/function(){function t(t){this.objects=[],this.getIndex=0,t&&(this.objects=t)}var e=t.prototype;return e.add=function(t){this.objects.push(t)},e.get=function(){return this.objects[this.getIndex++]},t}(),j=function(){};j.Value=new Map([["a",["ᶏ","ⱥ","ɑ","ᴀ","ɐ","ɒ"]],["aa",["å","ꜳ"]],["ae",["ä","æ","ᴁ","ᴭ","ᵆ","ǽ","ǣ","ᴂ"]],["ao",["ꜵ"]],["au",["ꜷ"]],["av",["ꜹ","ꜻ"]],["ay",["ꜽ"]],["b",["ƀ","ɓ","ƃ","ᵬ","ᶀ","ʙ"]],["c",["ȼ","ƈ","ɕ","ᴄ","ꜿ","ↄ"]],["d",["đ","ð","ɖ","ɗ","ƌ","ᵭ","ᶁ","ᶑ","ȡ","ᴅ","ꝺ"]],["db",["ȸ"]],["e",["ᶒ","ɇ","ⱸ","ᴇ","ə","ǝ","ɛ"]],["eo",["ᴔ"]],["f",["ƒ","ᵮ","ᶂ","ꜰ","ꝼ"]],["g",["ǥ","ɠ","ᶃ","ɢ","ȝ","ŋ","ꞡ","ᵹ","ꝿ"]],["h",["ħ","ⱨ","ɦ","ʜ","̃","ɧ","ⱶ","ɥ"]],["hv",["ƕ"]],["i",["ɨ","ᵻ","ᶖ","ı","ɪ","ɩ"]],["j",["ɉ","ȷ","ʝ","ɟ","ʄ","ᴊ"]],["k",["ƙ","ⱪ","ᶄ","ꝁ","ᴋ","ꝃ","ꝅ","ꞣ"]],["l",["ł","ƚ","ⱡ","ɫ","ɬ","ᶅ","ɭ","ȴ","ʟ","ꝉ","ꞁ","ꝇ"]],["m",["ᵯ","ᶆ","ɱ","ᴍ","ɯ"]],["n",["ɲ","ƞ","ᵰ","ᶇ","ɳ","ȵ","ɴ","ꞑ","ꞥ"]],["o",["ø","ǿ","ɵ","ɔ","ⱺ","ᴏ","ꝋ","ꝍ"]],["oe",["ö","œ"]],["oi",["ƣ"]],["oo",["ꝏ"]],["ou",["ȣ"]],["p",["ᵽ","ƥ","ᵱ","ᶈ","ᴘ","ƿ","ꝑ","ꝓ","ꝕ"]],["q",["ɋ","ʠ","ꝗ","ꝙ"]],["qp",["ȹ"]],["r",["ɍ","ɽ","ꝛ","ᵲ","ᶉ","ɼ","ɾ","ᵳ","ʀ","ɹ","ʁ","ꞧ","ꞃ"]],["s",["ᵴ","ᶊ","ʂ","ȿ","ꜱ","ʃ","ꞩ","ꞅ","ſ"]],["ss",["ß"]],["t",["ŧ","ⱦ","ƭ","ʈ","ᵵ","ƫ","ȶ","ᴛ","ꞇ"]],["th",["þ"]],["tz",["ꜩ"]],["u",["ʉ","ʊ","ᵾ","ᴜ","ᶙ"]],["ue",["ü","ᵫ"]],["v",["ʋ","ᶌ","ⱱ","ⱴ","ᴠ","ʌ","ꝟ"]],["vy",["ꝡ"]],["w",["ⱳ","ᴡ","ʍ"]],["x",["ᶍ"]],["y",["ɏ","ƴ","ʏ","ỿ"]],["z",["ƶ","ȥ","ⱬ","ᵶ","ᶎ","ʐ","ʑ","ɀ","ᴢ","ʒ","ƹ","ꝣ"]]]);var k=/*#__PURE__*/function(){function t(t,e,n,r,i,a){this.paddingLeft=void 0,this.paddingRight=void 0,this.paddingMiddle=void 0,this.replacements=void 0,this.treatCharacterAsSpace=void 0,this.allowCharacter=void 0,this.paddingLeft=t,this.paddingRight=e,this.paddingMiddle=n,this.replacements=r,this.treatCharacterAsSpace=i,this.allowCharacter=a}return t.createDefaultConfig=function(){var e=new Set(["_","-","–","/",",","\t"]);return new t("$$","!","!$$",[j.Value],function(t){return e.has(t)},function(t){return r.isAlphanumeric(t)})},t}(),P=function(t,e){this.query=void 0,this.duration=void 0,this.query=t,this.duration=e},B=/*#__PURE__*/function(){function t(t,e,n,r,i,a,s){this.testParameters=void 0,this.totalDuration=void 0,this.averageDuration=void 0,this.standardDeviation=void 0,this.fastest=void 0,this.slowest=void 0,this.longest=void 0,this.testParameters=t,this.totalDuration=e,this.averageDuration=n,this.standardDeviation=r,this.fastest=i,this.slowest=a,this.longest=s}return t.Create=function(e,n){if(0===n.length)return new t(e,0,0,0,new P("",0),new P("",0),new P("",0));var r=n.length,i=this.Sum(n.map(function(t){return t.duration})),a=i/r,s=Math.sqrt(this.Sum(n.map(function(t){return Math.pow(t.duration-a,2)}))/r),o=n.reduce(function(t,e){return t.duration<e.duration?t:e}),h=n.reduce(function(t,e){return t.duration>e.duration?t:e}),u=n.reduce(function(t,e){return t.query.length>e.query.length?t:e});return new t(e,i,a,s,o,h,u)},t.Sum=function(t){return t.reduce(function(t,e){return t+e},0)},t}(),U=function(t,e,n,r){this.testSeed=void 0,this.numberOfQueries=void 0,this.topN=void 0,this.minQuality=void 0,this.testSeed=t,this.numberOfQueries=e,this.topN=n,this.minQuality=r},V=/*#__PURE__*/function(){function t(t){this.dynamicSearcher=void 0,this.terms=void 0,this.random=void 0,this.dynamicSearcher=t,this.terms=[],this.random=this.mulberry32(0)}var e=t.prototype;return e.run=function(t){var e=[];this.terms=this.dynamicSearcher.getTerms().filter(function(t){return t}),this.random=this.mulberry32(t.testSeed);for(var n=0===this.terms.length?0:t.numberOfQueries,r=0,i=n;r<i;r++){var a=this.GetRandomQueryString(),s=new d(a,t.topN,t.minQuality),o=performance.now();this.dynamicSearcher.getMatches(s);var h=performance.now()-o;e.push(new P(a,h))}return B.Create(new U(t.testSeed,n,t.topN,t.minQuality),e)},e.GetRandomQueryString=function(){var t=this.GetRandomTerm(),e=this.getRandomInteger(1,t.length);return t.substring(0,e)},e.GetRandomTerm=function(){var t=this.getRandomInteger(0,this.terms.length);return this.terms[t]},e.mulberry32=function(t){return function(){t=1831565813+(t|=0)|0;var e=Math.imul(t^t>>>15,1|t);return(((e=e+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/4294967296}},e.getRandomInteger=function(t,e){return Math.floor(this.random()*(e-t)+t)},t}(),$=/*#__PURE__*/function(){function t(){this.terms=void 0,this.terms=[]}var e=t.prototype;return e.index=function(t){return this.terms=t,new c},e.getMatches=function(t){for(var e=[],n=0,r=this.terms.length;n<r;n++)this.terms[n]===t.string&&e.push(new M(n,1));return new N(e,t,new c)},e.save=function(t){t.add(this.terms)},e.load=function(t){this.terms=t.get()},t}(),H=/*#__PURE__*/function(){function t(t,e,n,r){this.normalizerConfig=void 0,this.ngramComputerConfig=void 0,this.maxQueryLength=void 0,this.inequalityPenalty=void 0,this.normalizerConfig=t,this.ngramComputerConfig=e,this.maxQueryLength=n,this.inequalityPenalty=r}return t.createDefaultConfig=function(){return new t(k.createDefaultConfig(),L.createDefaultConfig(),150,.05)},t}(),_=/*#__PURE__*/function(){function t(){}return t.createSearcher=function(t){var e=F.createSearcher(t),n=F.createSearcher(t),r=new l(t.maxQueryLength,e,n);return new g(r)},t.createDefaultSearcher=function(){var t=H.createDefaultConfig();return this.createSearcher(t)},t}();t.ArrayUtilities=e,t.Config=H,t.DefaultDynamicSearcher=l,t.DefaultEntitySearcher=p,t.DefaultNormalizer=C,t.DistinctSearcher=b,t.EntityMatch=v,t.EntityResult=i,t.EntitySearcherFactory=F,t.FuzzySearcher=q,t.GenericNormalizer=S,t.HashUtilities=n,t.InequalityPenalizingSearcher=O,t.InvertedIndex=E,t.LatinReplacements=j,t.LiteralSearcher=$,t.Match=M,t.Memento=G,t.Meta=c,t.MultiNormalizer=w,t.NgramComputer=Q,t.NgramComputerConfig=L,t.NgramNormalizer=x,t.NormalizationResult=y,t.NormalizerConfig=k,t.NormalizingSearcher=R,t.PerformanceTest=V,t.QualityComputer=A,t.Query=d,t.RemovalResult=m,t.Report=B,t.Result=N,t.ResultMerger=f,t.SanitizingNormalizer=I,t.SearcherFactory=_,t.SortingSearcher=D,t.StringUtilities=r,t.TermIds=z,t.TestRunParameters=U,t.TimedQuery=P,t.TimingDynamicSearcher=g,t.VariationNormalizer=T});
//# sourceMappingURL=fuzzy-search.umd.js.map
