var lyra=function(e){"use strict";const s=["arabic","armenian","dutch","english","french","greek","indonesian","italian","irish","indian","lithuanian","nepali","norwegian","portuguese","russian","spanish","swedish","german","finnish","danish","hungarian","romanian","serbian","turkish"];function n(e){return JSON.stringify(e,null,2)}function t(e){return"Invalid schema type. Expected string or object, but got "+e}function i(e,s){return`Invalid document structure. \nLyra has been initialized with the following schema: \n\n${n(e)}\n\nbut found the following doc:\n\n${n(s)}`}function o(e,s){return`Invalid property name. Expected a wildcard string ("*") or array containing one of the following properties: ${s.join(", ")}, but got: ${e}`}function a(e,s,n){return`Unable to delete document "${e}" from index "${s}" on word "${n}".`}function r(e){return`Language "${e}" is not supported.\nSupported languages are:\n - ${s.join("\n - ")}`}function u(e){return`"${e}" is a reserved property name. Please change it to "__${e}", "${e}__", "_${e}_", or similar.`}function l(){return"Custom stop words must be a function or an array of strings."}const d=[65,65,65,65,65,65,65,67,69,69,69,69,73,73,73,73,null,78,79,79,79,79,79,79,79,85,85,85,85,null,null,null,97,97,97,97,97,97,97,99,101,101,101,101,105,105,105,105,null,110,111,111,111,111,111,111,111,117,117,117,117];function m(e){return 192>e||e>252?e:d[e-192]||e}const h={dutch:/[^a-z0-9_'-]+/gim,english:/[^a-z0-9_'-]+/gim,french:/[^a-z0-9äâàéèëêïîöôùüûœç-]+/gim,italian:/[^a-z0-9_'-]+/gim,norwegian:/[^a-z0-9_æøåÆØÅäÄöÖüÜ]+/gim,portuguese:/[^a-zà-úÀ-Ú]/gim,russian:/[^a-zа-яА-ЯёЁ]+/gim,spanish:/[^a-zA-Zá-úÁ-ÚñÑüÜ]+/gim,swedish:/[^a-z0-9_åÅäÄöÖüÜ-]+/gim,german:/[^a-zA-ZäöüÄÖÜß]+/gim,finnish:/[^a-z0-9äöÄÖ]+/gim,danish:/[^a-z0-9æøåÆØÅ]+/gim,hungarian:/[^a-z0-9áéíóöőúüűÁÉÍÓÖŐÚÜŰ]+/gim,romanian:/[^a-z0-9ăâîșțĂÂÎȘȚ]+/gim,serbian:/[^a-z0-9čćžšđČĆŽŠĐ]+/gim,turkish:/[^a-z0-9çÇğĞıİöÖşŞüÜ]+/gim,lithuanian:/[^a-z0-9ąčęėįšųūžĄČĘĖĮŠŲŪŽ]+/gim,arabic:/[^a-z0-9أ-ي]+/gim,nepali:/[^a-z0-9अ-ह]+/gim,irish:/[^a-z0-9áéíóúÁÉÍÓÚ]+/gim,indian:/[^a-z0-9अ-ह]+/gim,armenian:/[^a-z0-9ա-ֆ]+/gim,greek:/[^a-z0-9α-ωά-ώ]+/gim,indonesian:/[^a-z0-9]+/gim},c=new Map;function f(e,s="english",n=!1,t=K(s)){if("string"!=typeof e)return[e];const i=h[s],o=function(e){for(;""===e[e.length-1];)e.pop();for(;""===e[0];)e.shift();return e}(e.toLowerCase().split(i).map((e=>function(e,s,n){const t=`${s}:${e}`;if(c.has(t))return c.get(t);if(n?.enableStopWords&&n?.customStopWords.includes(e)){const e="";return c.set(t,e),e}return n?.enableStemming&&"function"==typeof n?.stemmingFn&&(e=n?.stemmingFn(e)),e=function(e){const s=[];for(let n=0;e.length>n;n++)s[n]=m(e.charCodeAt(n));return String.fromCharCode(...s)}(e),c.set(t,e),e}(e,s,t))).filter(Boolean));return n?o:Array.from(new Set(o))}const v=(""+Date.now()).slice(5);let g=0;const b=BigInt(1e3),k=BigInt(1e6),w=BigInt(1e9);function p(){return"undefined"!=typeof process&&void 0!==process.hrtime?process.hrtime.bigint():"undefined"!=typeof performance?BigInt(Math.floor(1e6*performance.now())):BigInt(0)}function y(){return`${v}-${g++}`}const z=["id"],j={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},x={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},$="[aeiouy]",q="[^aeiou][^aeiouy]*",E=$+"[aeiou]*",S="^("+q+")?"+E+q,A="^("+q+")?"+E+q+E+q,C="^("+q+")?"+$;function I(e){let s,n,t,i,o,a;if(3>e.length)return e;const r=e.substring(0,1);if("y"==r&&(e=r.toUpperCase()+e.substring(1)),t=/^(.+?)(ss|i)es$/,i=/^(.+?)([^s])s$/,t.test(e)?e=e.replace(t,"$1$2"):i.test(e)&&(e=e.replace(i,"$1$2")),t=/^(.+?)eed$/,i=/^(.+?)(ed|ing)$/,t.test(e)){const s=t.exec(e);t=RegExp(S),t.test(s[1])&&(t=/.$/,e=e.replace(t,""))}else i.test(e)&&(s=i.exec(e)[1],i=RegExp(C),i.test(s)&&(e=s,i=/(at|bl|iz)$/,o=/([^aeiouylsz])\1$/,a=RegExp("^"+q+$+"[^aeiouwxy]$"),i.test(e)?e+="e":o.test(e)?(t=/.$/,e=e.replace(t,"")):a.test(e)&&(e+="e")));if(t=/^(.+?)y$/,t.test(e)&&(s=t.exec(e)?.[1],t=RegExp(C),s&&t.test(s)&&(e=s+"i")),t=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,t.test(e)){const i=t.exec(e);s=i?.[1],n=i?.[2],t=RegExp(S),s&&t.test(s)&&(e=s+j[n])}if(t=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,t.test(e)){const i=t.exec(e);s=i?.[1],n=i?.[2],t=RegExp(S),s&&t.test(s)&&(e=s+x[n])}if(t=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,i=/^(.+?)(s|t)(ion)$/,t.test(e))s=t.exec(e)?.[1],t=RegExp(A),s&&t.test(s)&&(e=s);else if(i.test(e)){const n=i.exec(e);s=n?.[1]??""+n?.[2]??"",i=RegExp(A),i.test(s)&&(e=s)}return t=/^(.+?)e$/,t.test(e)&&(s=t.exec(e)?.[1],t=RegExp(A),i=RegExp("^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$"),o=RegExp("^"+q+$+"[^aeiouwxy]$"),s&&(t.test(s)||i.test(s)&&!o.test(s))&&(e=s)),t=/ll$/,i=RegExp(A),t.test(e)&&i.test(e)&&(t=/.$/,e=e.replace(t,"")),"y"==r&&(e=r.toLowerCase()+e.substring(1)),e}function F(e=""){const s={id:y(),key:e,word:"",parent:null,children:{},docs:[],end:!1};return Object.defineProperty(s,"toJSON",{value:R}),s}function L(e,s){e.parent=s.id,e.word=s.word+e.key}function R(){const{key:e,word:s,children:n,docs:t,end:i}=this;return{key:e,word:s,children:n,docs:t,end:i}}function W(e,s,n,t,i,o){if(s.end){const{word:e,docs:a}=s;if(i&&e!==t)return;if(Object.hasOwn(n,e)||(o?o>=Math.abs(t.length-e.length)&&function(e,s,n){const t=function(e,s,n){if(e===s)return 0;const t=e;e.length>s.length&&(e=s,s=t);let i=e.length,o=s.length;for(;i>0&&e.charCodeAt(~-i)===s.charCodeAt(~-o);)i--,o--;if(!i)return o>n?-1:o;let a=0;for(;i>a&&e.charCodeAt(a)===s.charCodeAt(a);)a++;if(i-=a,o-=a,0===i)return o>n?-1:o;const r=o-i;if(n>o)n=o;else if(r>n)return-1;let u=0;const l=[],d=[];for(;n>u;)d[u]=s.charCodeAt(a+u),l[u]=++u;for(;o>u;)d[u]=s.charCodeAt(a+u),l[u++]=n+1;const m=n-r,h=o>n;let c=0,f=n,v=0,g=0,b=0,k=0,w=0;for(u=0;i>u;u++){for(g=u,v=u+1,k=e.charCodeAt(a+u),c+=u>m?1:0,f+=o>f?1:0,w=c;f>w;w++)b=v,v=g,g=l[w],k!==d[w]&&(v>g&&(v=g),v>b&&(v=b),v++),l[w]=v;if(h&&l[u+r]>n)return-1}return v>n?-1:v}(e,s,n);return{distance:t,isBounded:t>=0}}(t,e,o).isBounded&&(n[e]=[]):n[e]=[]),function(e,s){return Object.hasOwn(e,s)?e[s]:void 0}(n,e)&&a.length){const s=new Set(n[e]);for(const e of a)s.add(e);n[e]=Array.from(s)}}for(const a in s.children)W(e,e[s.children[a]],n,t,i,o)}function O(e,s,n,t){const i=n.length;for(let o=0;i>o;o++){const a=n[o];if(!s.children?.[a]){const n=F(a);L(n,s),e[n.id]=n,s.children[a]=n.id}s=e[s.children[a]],o===i-1&&(s.end=!0,s.docs.push(t))}}function B(e,s,n,t,i=!0){if(!n)return!1;const{word:o,docs:a}=s;if(i&&s.end&&o===n)return function(e,s){const n=e.docs.indexOf(s);-1!==n&&e.docs.splice(n,1)}(s,t),s.children?.size&&a.includes(t)&&(s.end=!1),!0;for(const i in s.children)B(e,e[s.children[i]],n,t);return!1}const _=Symbol("lyra.insertions"),N=globalThis.process?.emitWarning??function(e,s){console.warn(`[WARNING] [${s.code}] ${e}`)};function T(e){const s=e;"number"!=typeof s[_]&&(queueMicrotask((()=>{s[_]=void 0})),s[_]=0),s[_]>1e3?(N("Lyra's insert operation is synchronous. Please avoid inserting a large number of document in a single operation in order not to block the main thread.",{code:"LYRA0001"}),s[_]=-1):0>s[_]||s[_]++}const M={english:["i","me","my","myself","we","us","our","ours","ourselves","you","your","yours","yourself","yourselves","he","him","his","himself","she","her","hers","herself","it","its","itself","they","them","their","theirs","themselves","what","which","who","whom","this","that","these","those","am","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","will","would","shall","should","can","could","may","might","must","ought","i'm","you're","he's","she's","it's","we're","they're","i've","you've","we've","they've","i'd","you'd","he'd","she'd","we'd","they'd","i'll","you'll","he'll","she'll","we'll","they'll","isn't","aren't","wasn't","weren't","hasn't","haven't","hadn't","doesn't","don't","didn't","won't","wouldn't","shan't","shouldn't","can't","cannot","couldn't","mustn't","let's","that's","who's","what's","here's","there's","when's","where's","why's","how's","an","the","and","but","if","or","because","as","until","while","of","at","by","for","with","about","against","between","into","through","during","before","after","above","below","to","from","up","down","in","out","on","off","over","under","again","further","then","once","here","there","when","where","why","how","all","any","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very"],italian:["ad","al","allo","ai","agli","all","agl","alla","alle","con","col","coi","da","dal","dallo","dai","dagli","dall","dagl","dalla","dalle","di","del","dello","dei","degli","dell","degl","della","delle","in","nel","nello","nei","negli","nell","negl","nella","nelle","su","sul","sullo","sui","sugli","sull","sugl","sulla","sulle","per","tra","contro","io","tu","lui","lei","noi","voi","loro","mio","mia","miei","mie","tuo","tua","tuoi","tue","suo","sua","suoi","sue","nostro","nostra","nostri","nostre","vostro","vostra","vostri","vostre","mi","ti","ci","vi","lo","la","li","le","gli","ne","il","un","uno","una","ma","ed","se","perché","anche","come","dov","dove","che","chi","cui","non","più","quale","quanto","quanti","quanta","quante","quello","quelli","quella","quelle","questo","questi","questa","queste","si","tutto","tutti","a","c","e","i","l","o","ho","hai","ha","abbiamo","avete","hanno","abbia","abbiate","abbiano","avrò","avrai","avrà","avremo","avrete","avranno","avrei","avresti","avrebbe","avremmo","avreste","avrebbero","avevo","avevi","aveva","avevamo","avevate","avevano","ebbi","avesti","ebbe","avemmo","aveste","ebbero","avessi","avesse","avessimo","avessero","avendo","avuto","avuta","avuti","avute","sono","sei","è","siamo","siete","sia","siate","siano","sarò","sarai","sarà","saremo","sarete","saranno","sarei","saresti","sarebbe","saremmo","sareste","sarebbero","ero","eri","era","eravamo","eravate","erano","fui","fosti","fu","fummo","foste","furono","fossi","fosse","fossimo","fossero","essendo","faccio","fai","facciamo","fanno","faccia","facciate","facciano","farò","farai","farà","faremo","farete","faranno","farei","faresti","farebbe","faremmo","fareste","farebbero","facevo","facevi","faceva","facevamo","facevate","facevano","feci","facesti","fece","facemmo","faceste","fecero","facessi","facesse","facessimo","facessero","facendo","sto","stai","sta","stiamo","stanno","stia","stiate","stiano","starò","starai","starà","staremo","starete","staranno","starei","staresti","starebbe","staremmo","stareste","starebbero","stavo","stavi","stava","stavamo","stavate","stavano","stetti","stesti","stette","stemmo","steste","stettero","stessi","stesse","stessimo","stessero","stando"],french:["au","aux","avec","ce","ces","dans","de","des","du","elle","en","et","eux","il","je","la","le","leur","lui","ma","mais","me","même","mes","moi","mon","ne","nos","notre","nous","on","ou","par","pas","pour","qu","que","qui","sa","se","ses","son","sur","ta","te","tes","toi","ton","tu","un","une","vos","votre","vous","c","d","j","l","à","m","n","s","t","y","","été","étée","étées","étés","étant","suis","es","est","sommes","êtes","sont","serai","seras","sera","serons","serez","seront","serais","serait","serions","seriez","seraient","étais","était","étions","étiez","étaient","fus","fut","fûmes","fûtes","furent","sois","soit","soyons","soyez","soient","fusse","fusses","fût","fussions","fussiez","fussent","ayant","eu","eue","eues","eus","ai","as","avons","avez","ont","aurai","auras","aura","aurons","aurez","auront","aurais","aurait","aurions","auriez","auraient","avais","avait","avions","aviez","avaient","eut","eûmes","eûtes","eurent","aie","aies","ait","ayons","ayez","aient","eusse","eusses","eût","eussions","eussiez","eussent","ceci","cela","celà","cet","cette","ici","ils","les","leurs","quel","quels","quelle","quelles","sans","soi"],spanish:["de","la","que","el","en","y","a","los","del","se","las","por","un","para","con","no","una","su","al","lo","como","más","pero","sus","le","ya","o","este","sí","porque","esta","entre","cuando","muy","sin","sobre","también","me","hasta","hay","donde","quien","desde","todo","nos","durante","todos","uno","les","ni","contra","otros","ese","eso","ante","ellos","e","esto","mí","antes","algunos","qué","unos","yo","otro","otras","otra","él","tanto","esa","estos","mucho","quienes","nada","muchos","cual","poco","ella","estar","estas","algunas","algo","nosotros","mi","mis","tú","te","ti","tu","tus","ellas","nosotras","vosotros","vosotras","os","mío","mía","míos","mías","tuyo","tuya","tuyos","tuyas","suyo","suya","suyos","suyas","nuestro","nuestra","nuestros","nuestras","vuestro","vuestra","vuestros","vuestras","esos","esas","estoy","estás","está","estamos","estáis","están","esté","estés","estemos","estéis","estén","estaré","estarás","estará","estaremos","estaréis","estarán","estaría","estarías","estaríamos","estaríais","estarían","estaba","estabas","estábamos","estabais","estaban","estuve","estuviste","estuvo","estuvimos","estuvisteis","estuvieron","estuviera","estuvieras","estuviéramos","estuvierais","estuvieran","estuviese","estuvieses","estuviésemos","estuvieseis","estuviesen","estando","estado","estada","estados","estadas","estad","he","has","ha","hemos","habéis","han","haya","hayas","hayamos","hayáis","hayan","habré","habrás","habrá","habremos","habréis","habrán","habría","habrías","habríamos","habríais","habrían","había","habías","habíamos","habíais","habían","hube","hubiste","hubo","hubimos","hubisteis","hubieron","hubiera","hubieras","hubiéramos","hubierais","hubieran","hubiese","hubieses","hubiésemos","hubieseis","hubiesen","habiendo","habido","habida","habidos","habidas","soy","eres","es","somos","sois","son","sea","seas","seamos","seáis","sean","seré","serás","será","seremos","seréis","serán","sería","serías","seríamos","seríais","serían","era","eras","éramos","erais","eran","fui","fuiste","fue","fuimos","fuisteis","fueron","fuera","fueras","fuéramos","fuerais","fueran","fuese","fueses","fuésemos","fueseis","fuesen","siendo","sido","tengo","tienes","tiene","tenemos","tenéis","tienen","tenga","tengas","tengamos","tengáis","tengan","tendré","tendrás","tendrá","tendremos","tendréis","tendrán","tendría","tendrías","tendríamos","tendríais","tendrían","tenía","tenías","teníamos","teníais","tenían","tuve","tuviste","tuvo","tuvimos","tuvisteis","tuvieron","tuviera","tuvieras","tuviéramos","tuvierais","tuvieran","tuviese","tuvieses","tuviésemos","tuvieseis","tuviesen","teniendo","tenido","tenida","tenidos","tenidas","tened"],portuguese:["de","a","o","que","e","do","da","em","um","para","com","não","uma","os","no","se","na","por","mais","as","dos","como","mas","ao","ele","das","à","seu","sua","ou","quando","muito","nos","já","eu","também","só","pelo","pela","até","isso","ela","entre","depois","sem","mesmo","aos","seus","quem","nas","me","esse","eles","você","essa","num","nem","suas","meu","às","minha","numa","pelos","elas","qual","nós","lhe","deles","essas","esses","pelas","este","dele","tu","te","vocês","vos","lhes","meus","minhas","teu","tua","teus","tuas","nosso","nossa","nossos","nossas","dela","delas","esta","estes","estas","aquele","aquela","aqueles","aquelas","isto","aquilo","estou","está","estamos","estão","estive","esteve","estivemos","estiveram","estava","estávamos","estavam","estivera","estivéramos","esteja","estejamos","estejam","estivesse","estivéssemos","estivessem","estiver","estivermos","estiverem","hei","há","havemos","hão","houve","houvemos","houveram","houvera","houvéramos","haja","hajamos","hajam","houvesse","houvéssemos","houvessem","houver","houvermos","houverem","houverei","houverá","houveremos","houverão","houveria","houveríamos","houveriam","sou","somos","são","era","éramos","eram","fui","foi","fomos","foram","fora","fôramos","seja","sejamos","sejam","fosse","fôssemos","fossem","for","formos","forem","serei","será","seremos","serão","seria","seríamos","seriam","tenho","tem","temos","tém","tinha","tínhamos","tinham","tive","teve","tivemos","tiveram","tivera","tivéramos","tenha","tenhamos","tenham","tivesse","tivéssemos","tivessem","tiver","tivermos","tiverem","terei","terá","teremos","terão","teria","teríamos","teriam"],dutch:["de","en","van","ik","te","dat","die","in","een","hij","het","niet","zijn","is","was","op","aan","met","als","voor","had","er","maar","om","hem","dan","zou","of","wat","mijn","men","dit","zo","door","over","ze","zich","bij","ook","tot","je","mij","uit","der","daar","haar","naar","heb","hoe","heeft","hebben","deze","u","want","nog","zal","me","zij","nu","ge","geen","omdat","iets","worden","toch","al","waren","veel","meer","doen","toen","moet","ben","zonder","kan","hun","dus","alles","onder","ja","eens","hier","wie","werd","altijd","doch","wordt","wezen","kunnen","ons","zelf","tegen","na","reeds","wil","kon","niets","uw","iemand","geweest","andere"],swedish:["och","det","att","i","en","jag","hon","som","han","på","den","med","var","sig","för","så","till","är","men","ett","om","hade","de","av","icke","mig","du","henne","då","sin","nu","har","inte","hans","honom","skulle","hennes","där","min","man","ej","vid","kunde","något","från","ut","när","efter","upp","vi","dem","vara","vad","över","än","dig","kan","sina","här","ha","mot","alla","under","någon","eller","allt","mycket","sedan","ju","denna","själv","detta","åt","utan","varit","hur","ingen","mitt","ni","bli","blev","oss","din","dessa","några","deras","blir","mina","samma","vilken","er","sådan","vår","blivit","dess","inom","mellan","sådant","varför","varje","vilka","ditt","vem","vilket","sitta","sådana","vart","dina","vars","vårt","våra","ert","era","vilkas"],russian:["и","в","во","не","что","он","на","я","с","со","как","а","то","все","она","так","его","но","да","ты","к","у","же","вы","за","бы","по","только","ее","мне","было","вот","от","меня","еще","нет","о","из","ему","теперь","когда","даже","ну","вдруг","ли","если","уже","или","ни","быть","был","него","до","вас","нибудь","опять","уж","вам","сказал","ведь","там","потом","себя","ничего","ей","может","они","тут","где","есть","надо","ней","для","мы","тебя","их","чем","была","сам","чтоб","без","будто","человек","чего","раз","тоже","себе","под","жизнь","будет","ж","тогда","кто","этот","говорил","того","потому","этого","какой","совсем","ним","здесь","этом","один","почти","мой","тем","чтобы","нее","кажется","сейчас","были","куда","зачем","сказать","всех","никогда","сегодня","можно","при","наконец","два","об","другой","хоть","после","над","больше","тот","через","эти","нас","про","всего","них","какая","много","разве","сказала","три","эту","моя","впрочем","хорошо","свою","этой","перед","иногда","лучше","чуть","том","нельзя","такой","им","более","всегда","конечно","всю","между"],norwegian:["og","i","jeg","det","at","en","et","den","til","er","som","på","de","med","han","av","ikke","ikkje","der","så","var","meg","seg","men","ett","har","om","vi","min","mitt","ha","hadde","hun","nå","over","da","ved","fra","du","ut","sin","dem","oss","opp","man","kan","hans","hvor","eller","hva","skal","selv","sjøl","her","alle","vil","bli","ble","blei","blitt","kunne","inn","når","være","kom","noen","noe","ville","dere","som","deres","kun","ja","etter","ned","skulle","denne","for","deg","si","sine","sitt","mot","å","meget","hvorfor","dette","disse","uten","hvordan","ingen","din","ditt","blir","samme","hvilken","hvilke","sånn","inni","mellom","vår","hver","hvem","vors","hvis","både","bare","enn","fordi","før","mange","også","slik","vært","være","båe","begge","siden","dykk","dykkar","dei","deira","deires","deim","di","då","eg","ein","eit","eitt","elles","honom","hjå","ho","hoe","henne","hennar","hennes","hoss","hossen","ikkje","ingi","inkje","korleis","korso","kva","kvar","kvarhelst","kven","kvi","kvifor","me","medan","mi","mine","mykje","no","nokon","noka","nokor","noko","nokre","si","sia","sidan","so","somt","somme","um","upp","vere","vore","verte","vort","varte","vart"],german:["aber","alle","allem","allen","aller","alles","als","also","am","an","ander","andere","anderem","anderen","anderer","anderes","anderm","andern","anderr","anders","auch","auf","aus","bei","bin","bis","bist","da","damit","dann","der","den","des","dem","die","das","daß","derselbe","derselben","denselben","desselben","demselben","dieselbe","dieselben","dasselbe","dazu","dein","deine","deinem","deinen","deiner","deines","denn","derer","dessen","dich","dir","du","dies","diese","diesem","diesen","dieser","dieses","doch","dort","durch","ein","eine","einem","einen","einer","eines","einig","einige","einigem","einigen","einiger","einiges","einmal","er","ihn","ihm","es","etwas","euer","eure","eurem","euren","eurer","eures","für","gegen","gewesen","hab","habe","haben","hat","hatte","hatten","hier","hin","hinter","ich","mich","mir","ihr","ihre","ihrem","ihren","ihrer","ihres","euch","im","in","indem","ins","ist","jede","jedem","jeden","jeder","jedes","jene","jenem","jenen","jener","jenes","jetzt","kann","kein","keine","keinem","keinen","keiner","keines","können","könnte","machen","man","manche","manchem","manchen","mancher","manches","mein","meine","meinem","meinen","meiner","meines","mit","muss","musste","nach","nicht","nichts","noch","nun","nur","ob","oder","ohne","sehr","sein","seine","seinem","seinen","seiner","seines","selbst","sich","sie","ihnen","sind","so","solche","solchem","solchen","solcher","solches","soll","sollte","sondern","sonst","über","um","und","uns","unse","unsem","unsen","unser","unses","unter","viel","vom","von","vor","während","war","waren","warst","was","weg","weil","weiter","welche","welchem","welchen","welcher","welches","wenn","werde","werden","wie","wieder","will","wir","wird","wirst","wo","wollen","wollte","würde","würden","zu","zum","zur","zwar","zwischen"],danish:["og","i","jeg","det","at","en","den","til","er","som","på","de","med","han","af","for","ikke","der","var","mig","sig","men","et","har","om","vi","min","havde","ham","hun","nu","over","da","fra","du","ud","sin","dem","os","op","man","hans","hvor","eller","hvad","skal","selv","her","alle","vil","blev","kunne","ind","når","være","dog","noget","ville","jo","deres","efter","ned","skulle","denne","end","dette","mit","også","under","have","dig","anden","hende","mine","alt","meget","sit","sine","vor","mod","disse","hvis","din","nogle","hos","blive","mange","ad","bliver","hendes","været","thi","jer","sådan"],finnish:["olla","olen","olet","on","olemme","olette","ovat","ole","oli","olisi","olisit","olisin","olisimme","olisitte","olisivat","olit","olin","olimme","olitte","olivat","ollut","olleet","en","et","ei","emme","ette","eivät","minä","minun","minut","minua","minussa","minusta","minuun","minulla","minulta","minulle","sinä","sinun","sinut","sinua","sinussa","sinusta","sinuun","sinulla","sinulta","sinulle","hän","hänen","hänet","häntä","hänessä","hänestä","häneen","hänellä","häneltä","hänelle","me","meidän","meidät","meitä","meissä","meistä","meihin","meillä","meiltä","meille","te","teidän","teidät","teitä","teissä","teistä","teihin","teillä","teiltä","teille","he","heidän","heidät","heitä","heissä","heistä","heihin","heillä","heiltä","heille","tämä","tämän","tätä","tässä","tästä","tähän","tällä","tältä","tälle","tänä","täksi","tuo","tuon","tuota","tuossa","tuosta","tuohon","tuolla","tuolta","tuolle","tuona","tuoksi","se","sen","sitä","siinä","siitä","siihen","sillä","siltä","sille","sinä","siksi","nämä","näiden","näitä","näissä","näistä","näihin","näillä","näiltä","näille","näinä","näiksi","nuo","noiden","noita","noissa","noista","noihin","noilla","noilta","noille","noina","noiksi","ne","niiden","niitä","niissä","niistä","niihin","niillä","niiltä","niille","niinä","niiksi","kuka","kenen","kenet","ketä","kenessä","kenestä","keneen","kenellä","keneltä","kenelle","kenenä","keneksi","ketkä","keiden","ketkä","keitä","keissä","keistä","keihin","keillä","keiltä","keille","keinä","keiksi","mikä","minkä","minkä","mitä","missä","mistä","mihin","millä","miltä","mille","minä","miksi","mitkä","joka","jonka","jota","jossa","josta","johon","jolla","jolta","jolle","jona","joksi","jotka","joiden","joita","joissa","joista","joihin","joilla","joilta","joille","joina","joiksi","että","ja","jos","koska","kuin","mutta","niin","sekä","sillä","tai","vaan","vai","vaikka","kanssa","mukaan","noin","poikki","yli","kun","niin","nyt","itse"]},P=Object.keys(M),D=["afterInsert"];async function U(e,...s){const n=Array.isArray(e)?e:[e];for(const e of n)await e.apply(this,s)}function H(e,s,n=""){for(const i of Object.keys(s)){if(z.includes(i))throw Error(u(i));const o=typeof i,a="object"==typeof s[i];if("string"!==o)throw Error(t(o));const r=`${n}${i}`;a?H(e,s[i],r+"."):e.index[r]=F()}}function J(e,s){for(const n in e){if(!(n in s))return!1;if("object"==typeof e[n])J(e[n],s);else if(typeof e[n]!==s[n])return!1}return!0}function Z(e,s,n,t,i,o="",a){for(const r of Object.keys(n)){const u=`${o}${r}`;if("object"==typeof n[r])return void Z(e,s,n[r],t,i,u+".",a);if("string"==typeof n[r]){const o=e[u],l=a.tokenizerFn(n[r],i.language,!1,a);for(const e of l)O(s,o,e,t)}}}function G(e,s){const n=function(e,s,{term:n,exact:t,tolerance:i}){const o={},a=n.length;for(let t=0;a>t;t++){const a=n[t],r=s.children?.[a];if(s.children?.[a])s=e[r];else if(!i)return o}return W(e,s,o,n,t,i),o}(e.nodes,e.index[s.index],{term:s.term,exact:s.exact,tolerance:s.tolerance}),t=new Set;for(const e in n)for(const s of n[e])t.add(s);return Array.from(t)}async function Y(e,n,t){t={language:e.defaultLanguage,...t};const o=y();if(!s.includes(t.language))throw Error(r(t.language));if(!J(n,e.schema))throw Error(i(e.schema,n));return e.docs[o]=n,Z(e.index,e.nodes,n,o,t,void 0,e.tokenizer),T(e),e.hooks.afterInsert&&await U.call(e,e.hooks.afterInsert,o),{id:o}}function K(e,s={}){let n,t,i=[],o=[];if(s?.tokenizerFn){if("function"!=typeof s.tokenizerFn)throw Error(function(){return"tokenizer.tokenizerFn must be a function."}());t=s.tokenizerFn}else{if(t=f,s?.stemmingFn){if("function"!=typeof s.stemmingFn)throw Error(function(){return"tokenizer.stemmingFn property must be a function."}());n=s.stemmingFn}else n=I;if(i=P.includes(e)?M[e]??[]:[],s?.customStopWords)switch(typeof s.customStopWords){case"function":o=s.customStopWords(i);break;case"object":if(!Array.isArray(s.customStopWords))throw Error(l());if(s.customStopWords.some((e=>"string"!=typeof e)))throw Error(function(){return"Custom stop words array must only contain strings."}());o=s.customStopWords;break;default:throw Error(l())}}return{enableStopWords:s?.enableStopWords??!0,enableStemming:s?.enableStemming??!0,stemmingFn:n,customStopWords:o??i,tokenizerFn:t}}return e.create=function(e){const n=e?.defaultLanguage?.toLowerCase()??"english";if(!s.includes(n))throw Error(r(n));!function(e){if(e){if("object"!=typeof e)throw Error(function(){return"Invalid hooks object"}());const s=Object.keys(e).filter((e=>!D.includes(e)));if(s.length)throw Error(function(e){return"The following hooks aren't supported. Hooks: "+e}(s))}}(e.hooks);const t={defaultLanguage:n,schema:e.schema,docs:{},nodes:{},index:{},hooks:e.hooks||{},edge:e.edge??!1,tokenizer:K(n,e.tokenizer)};return H(t,e.schema),t},e.defaultTokenizerConfig=K,e.formatNanoseconds=function(e){return"number"==typeof e&&(e=BigInt(e)),b>e?e+"ns":k>e?e/b+"μs":w>e?e/k+"ms":e/w+"s"},e.insert=function(e,n,t){t={language:e.defaultLanguage,...t};const o=y();if(!s.includes(t.language))throw Error(r(t.language));if(!J(n,e.schema))throw Error(i(e.schema,n));return e.docs[o]=n,Z(e.index,e.nodes,n,o,t,void 0,e.tokenizer),T(e),{id:o}},e.insertBatch=async function(e,s,n){const t=n?.batchSize??1e3;return new Promise(((i,o)=>{let a=0;setTimeout((async function r(){const u=s.slice(a*t,(a+1)*t);if(a++,!u.length)return i();for(const s of u)try{await Y(e,s,n)}catch(e){o(e)}setTimeout(r,0)}),0)}))},e.insertWithHooks=Y,e.load=function(e,{index:s,docs:n,nodes:t,schema:i}){if(!e.edge)throw Error(function(){return"load works on edge only. Use edge: true in Lyra constructor to enable it."}());e.index=s,e.docs=n,e.nodes=t,e.schema=i},e.remove=function(e,s){if(e.tokenizer||(e.tokenizer=K(e.defaultLanguage)),!(s in e.docs))throw Error(function(e){return`Document with ID ${e} does not exists`}(s));const n=e.docs[s];for(const t in n)if("string"===e.schema[t]){const i=e.index[t],o=e.tokenizer.tokenizerFn(n[t],e.defaultLanguage,!1,e.tokenizer);for(const n of o)if(n&&B(e.nodes,i,n,s))throw Error(a(s,t,n))}return e.docs[s]=void 0,!0},e.save=function(e){return{index:e.index,docs:e.docs,nodes:e.nodes,schema:e.schema}},e.search=function(e,s,n){n||(n=e.defaultLanguage),e.tokenizer||(e.tokenizer=K(n));const t=e.tokenizer.tokenizerFn(s.term,n,!1,e.tokenizer),i=function(e,s){const n=Object.keys(e.index);if(!s)return n;if("string"==typeof s){if("*"===s)return n;throw Error(o(s,n))}for(const e of s)if(!n.includes(e))throw Error(o(e,n));return s}(e,s.properties),a=new Set,{limit:r=10,offset:u=0,exact:l=!1}=s,d=Array.from({length:r}),m=p();let h=0,c=0;for(const n of t)for(const t of i){const i=G(e,{...s,index:t,term:n,exact:l});for(const e of i)a.add(e);if(h>=r)break;for(const s of a)if(u>c)c++;else{if(h>=r)break;-1===d.findIndex((e=>e?.id===s))&&(d[h]={id:s,...e.docs[s]}),h++}}const f=d.filter(Boolean);return{elapsed:p()-m,hits:f,count:a.size}},e.tokenize=f,e}({});
