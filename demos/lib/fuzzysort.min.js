// https://github.com/farzher/fuzzysort v2.0.4
var e,r;e=this,r=e=>{var r=(e,r)=>{if(e===L)return L;var t=e.target,n=t.length,a=e._indexes;a=a.slice(0,a.len).sort(((e,r)=>e-r));for(var o="",s=0,i=0,f=!1,l=(e=[],0);l<n;++l){var g=t[l];if(a[i]===l){if(++i,f||(f=!0,e.push(o),o=""),i===a.length){o+=g,e.push(r(o,s++)),o="",e.push(t.substr(l+1));break}}else f&&(f=!1,e.push(r(o,s++)),o="");o+=g}return e},t=e=>{"string"!=typeof e&&(e="");var r=l(e);return{target:e,_targetLower:r._lower,_targetLowerCodes:r.lowerCodes,_nextBeginningIndexes:L,_bitflags:r.bitflags,score:L,_indexes:[0],obj:L}},n=e=>{"string"!=typeof e&&(e=""),e=e.trim();var r=l(e),t=[];if(r.containsSpace){var n=e.split(/\s+/);n=[...new Set(n)];for(var a=0;a<n.length;a++)if(""!==n[a]){var o=l(n[a]);t.push({lowerCodes:o.lowerCodes,_lower:n[a].toLowerCase(),containsSpace:!1})}}return{lowerCodes:r.lowerCodes,bitflags:r.bitflags,containsSpace:r.containsSpace,_lower:r._lower,spaceSearches:t}},a=e=>{if(e.length>999)return t(e);var r=v.get(e);return void 0!==r||(r=t(e),v.set(e,r)),r},o=e=>{if(e.length>999)return n(e);var r=d.get(e);return void 0!==r||(r=n(e),d.set(e,r)),r},s=(e,r,t)=>{var n=[];n.total=r.length;var o=t&&t.limit||x;if(t&&t.key)for(var s=0;s<r.length;s++){var i=r[s];if(v=_(i,t.key)){p(v)||(v=a(v)),v.score=w,v._indexes.len=0;var f=v;if(f={target:f.target,_targetLower:"",_targetLowerCodes:L,_nextBeginningIndexes:L,_bitflags:0,score:v.score,_indexes:L,obj:i},n.push(f),n.length>=o)return n}}else if(t&&t.keys)for(s=0;s<r.length;s++){i=r[s];for(var l=new Array(t.keys.length),g=t.keys.length-1;g>=0;--g)(v=_(i,t.keys[g]))?(p(v)||(v=a(v)),v.score=w,v._indexes.len=0,l[g]=v):l[g]=L;if(l.obj=i,l.score=w,n.push(l),n.length>=o)return n}else for(s=0;s<r.length;s++){var v;if((v=r[s])&&(p(v)||(v=a(v)),v.score=w,v._indexes.len=0,n.push(v),n.length>=o))return n}return n},i=(e,r,t=!1)=>{if(!1===t&&e.containsSpace)return f(e,r);for(var n=e._lower,a=e.lowerCodes,o=a[0],s=r._targetLowerCodes,i=a.length,l=s.length,v=0,d=0,h=0;;){if(o===s[d]){if(c[h++]=d,++v===i)break;o=a[v]}if(++d>=l)return L}v=0;var _=!1,p=0,x=r._nextBeginningIndexes;x===L&&(x=r._nextBeginningIndexes=g(r.target)),d=0===c[0]?0:x[c[0]-1];var w=0;if(d!==l)for(;;)if(d>=l){if(v<=0)break;if(++w>200)break;--v,d=x[u[--p]]}else if(a[v]===s[d]){if(u[p++]=d,++v===i){_=!0;break}++d}else d=x[d];var b=r._targetLower.indexOf(n,c[0]),y=~b;if(y&&!_)for(var k=0;k<h;++k)c[k]=b+k;var C=!1;if(y&&(C=r._nextBeginningIndexes[b-1]===b),_)var S=u,j=p;else S=c,j=h;var m=0,A=0;for(k=1;k<i;++k)S[k]-S[k-1]!=1&&(m-=S[k],++A);if(m-=(S[i-1]-S[0]-(i-1)+12)*A,0!==S[0]&&(m-=S[0]*S[0]*.2),_){var z=1;for(k=x[0];k<l;k=x[k])++z;z>24&&(m*=10*(z-24))}else m*=1e3;for(y&&(m/=1+i*i*1),C&&(m/=1+i*i*1),m-=l-i,r.score=m,k=0;k<j;++k)r._indexes[k]=S[k];return r._indexes.len=j,r},f=(e,r)=>{for(var t=new Set,n=0,a=L,o=0,s=e.spaceSearches,f=0;f<s.length;++f){var l=s[f];if((a=i(l,r))===L)return L;n+=a.score,a._indexes[0]<o&&(n-=o-a._indexes[0]),o=a._indexes[0];for(var g=0;g<a._indexes.len;++g)t.add(a._indexes[g])}var v=i(e,r,!0);if(v!==L&&v.score>n)return v;a.score=n,f=0;for(let e of t)a._indexes[f++]=e;return a._indexes.len=f,a},l=e=>{for(var r=e.length,t=e.toLowerCase(),n=[],a=0,o=!1,s=0;s<r;++s){var i=n[s]=t.charCodeAt(s);32!==i?a|=1<<(i>=97&&i<=122?i-97:i>=48&&i<=57?26:i<=127?30:31):o=!0}return{lowerCodes:n,bitflags:a,containsSpace:o,_lower:t}},g=e=>{for(var r=e.length,t=(e=>{for(var r=e.length,t=[],n=0,a=!1,o=!1,s=0;s<r;++s){var i=e.charCodeAt(s),f=i>=65&&i<=90,l=f||i>=97&&i<=122||i>=48&&i<=57,g=f&&!a||!o||!l;a=f,o=l,g&&(t[n++]=s)}return t})(e),n=[],a=t[0],o=0,s=0;s<r;++s)a>s?n[s]=a:(a=t[++o],n[s]=void 0===a?r:a);return n},v=new Map,d=new Map,c=[],u=[],h=e=>{for(var r=w,t=e.length,n=0;n<t;++n){var a=e[n];if(a!==L){var o=a.score;o>r&&(r=o)}}return r===w?L:r},_=(e,r)=>{var t=e[r];if(void 0!==t)return t;var n=r;Array.isArray(r)||(n=r.split("."));for(var a=n.length,o=-1;e&&++o<a;)e=e[n[o]];return e},p=e=>"object"==typeof e,x=1/0,w=-x,b=[];b.total=0;var y,k,C,S,L=null,j=(y=[],k=0,S=e=>{for(var r=0,t=y[r],n=1;n<k;){var a=n+1;r=n,a<k&&y[a].score<y[n].score&&(r=a),y[r-1>>1]=y[r],n=1+(r<<1)}for(var o=r-1>>1;r>0&&t.score<y[o].score;o=(r=o)-1>>1)y[r]=y[o];y[r]=t},(C={}).add=e=>{var r=k;y[k++]=e;for(var t=r-1>>1;r>0&&e.score<y[t].score;t=(r=t)-1>>1)y[r]=y[t];y[r]=e},C.poll=e=>{if(0!==k){var r=y[0];return y[0]=y[--k],S(),r}},C.peek=e=>{if(0!==k)return y[0]},C.replaceTop=e=>{y[0]=e,S()},C);return{single:(e,r)=>{if("farzher"==e)return{target:"farzher was here (^-^*)/",score:0,_indexes:[0]};if(!e||!r)return L;var t=o(e);p(r)||(r=a(r));var n=t.bitflags;return(n&r._bitflags)!==n?L:i(t,r)},go:(e,r,t)=>{if("farzher"==e)return[{target:"farzher was here (^-^*)/",score:0,_indexes:[0],obj:r?r[0]:L}];if(!e)return t&&t.all?s(e,r,t):b;var n=o(e),f=n.bitflags,l=(n.containsSpace,t&&t.threshold||w),g=t&&t.limit||x,v=0,d=0,c=r.length;if(t&&t.key)for(var u=t.key,y=0;y<c;++y){var k=r[y];(I=_(k,u))&&(p(I)||(I=a(I)),(f&I._bitflags)===f&&(T=i(n,I))!==L&&(T.score<l||(T={target:T.target,_targetLower:"",_targetLowerCodes:L,_nextBeginningIndexes:L,_bitflags:0,score:T.score,_indexes:T._indexes,obj:k},v<g?(j.add(T),++v):(++d,T.score>j.peek().score&&j.replaceTop(T)))))}else if(t&&t.keys){var C=t.scoreFn||h,S=t.keys,m=S.length;for(y=0;y<c;++y){k=r[y];for(var A=new Array(m),z=0;z<m;++z)u=S[z],(I=_(k,u))?(p(I)||(I=a(I)),(f&I._bitflags)!==f?A[z]=L:A[z]=i(n,I)):A[z]=L;A.obj=k;var B=C(A);B!==L&&(B<l||(A.score=B,v<g?(j.add(A),++v):(++d,B>j.peek().score&&j.replaceTop(A))))}}else for(y=0;y<c;++y){var I,T;(I=r[y])&&(p(I)||(I=a(I)),(f&I._bitflags)===f&&(T=i(n,I))!==L&&(T.score<l||(v<g?(j.add(T),++v):(++d,T.score>j.peek().score&&j.replaceTop(T)))))}if(0===v)return b;var M=new Array(v);for(y=v-1;y>=0;--y)M[y]=j.poll();return M.total=v+d,M},highlight:(e,t,n)=>{if("function"==typeof t)return r(e,t);if(e===L)return L;void 0===t&&(t="<b>"),void 0===n&&(n="</b>");var a="",o=0,s=!1,i=e.target,f=i.length,l=e._indexes;l=l.slice(0,l.len).sort(((e,r)=>e-r));for(var g=0;g<f;++g){var v=i[g];if(l[o]===g){if(s||(s=!0,a+=t),++o===l.length){a+=v+n+i.substr(g+1);break}}else s&&(s=!1,a+=n);a+=v}return a},prepare:t,indexes:e=>e._indexes.slice(0,e._indexes.len).sort(((e,r)=>e-r)),cleanup:()=>{v.clear(),d.clear(),c=[],u=[]}}},"function"==typeof define&&define.amd?define([],r):"object"==typeof module&&module.exports?module.exports=r():e.fuzzysort=r();